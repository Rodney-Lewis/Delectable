<form [formGroup]="recipeForm" (ngSubmit)="onSubmit()">

   <div formGroupName="recipe" class="form-group">
      <h3>Create recipe</h3>
      <div class="form-row">
         <div class="col-lg">
            <label for="name">Name</label>
            <input type="text" class="form-control" id="name" formControlName="name" placeholder="Name" required>
            <div
               *ngIf="getFormComponent('recipe.name').invalid && (getFormComponent('recipe.name').dirty || getFormComponent('recipe.name').touched) || formSubmitted">
               <div *ngIf="getFormComponent('recipe.name').errors.required" class="validator">
                  Name is a required field.
               </div>
            </div>
         </div>
      </div>

      <div class="form-row">
         <div class="col-lg">
            <label for="source">Source</label>
            <input type="text" class="form-control" id="source" formControlName="source"
               placeholder="https://www.google.com">
            <div
               *ngIf="getFormComponent('recipe.source').invalid && (getFormComponent('recipe.source').dirty || getFormComponent('recipe.source').touched) || formSubmitted">
               <div *ngIf="getFormComponent('recipe.source').errors.required" class="validator">
                  Source is a required field.
               </div>
            </div>
         </div>
      </div>

      <div class="form-row">
         <div class="col">
            <div class="form-group">
               <label>prepTime time</label>
               <div class="input-group">
                  <input class="form-control time-hour" id="prepTimeHour" formControlName="prepTimeHour" type="number">
                  <input class="time-postfix" type="text" value=" Hours" readonly="readonly" />
               </div>
               <div class="input-group">
                  <input class="form-control time-minute" id="prepTimeMinute" formControlName="prepTimeMinute" type="number">
                  <input class="time-postfix" type="text" value=" Minutes" readonly="readonly" />
               </div>
               <div class="input-group ">
                  <input class="form-control time-second" id="prepTimeSecond" formControlName="prepTimeSecond" type="number">
                  <input class="time-postfix" type="text" value=" Seconds" readonly="readonly" />
               </div>
               <div
                  *ngIf="getFormComponent('recipe.prepTimeHour').invalid && (getFormComponent('recipe.prepTimeHour').dirty || getFormComponent('recipe.prepTimeHour').touched)">
                  <div *ngIf="getFormComponent('recipe.prepTimeHour').errors.min" class="validator">
                     prepTime hours can not be less then 0.
                  </div>
               </div>
               <div
                  *ngIf="getFormComponent('recipe.prepTimeMinute').invalid && (getFormComponent('recipe.prepTimeMinute').dirty || getFormComponent('recipe.prepTimeMinute').touched)">
                  <div *ngIf="getFormComponent('recipe.prepTimeMinute').errors.min" class="validator">
                     prepTime minutes can not be less then 0.
                  </div>
                  <div *ngIf="getFormComponent('recipe.prepTimeMinute').errors.max" class="validator">
                     prepTime minutes can not be greater then 59.
                  </div>
               </div>
               <div
                  *ngIf="getFormComponent('recipe.prepTimeSecond').invalid && (getFormComponent('recipe.prepTimeSecond').dirty || getFormComponent('recipe.prepTimeSecond').touched)">
                  <div *ngIf="getFormComponent('recipe.prepTimeSecond').errors.min" class="validator">
                     prepTime seconds can not be less then 0.
                  </div>
                  <div *ngIf="getFormComponent('recipe.prepTimeSecond').errors.max" class="validator">
                     prepTime seconds can not be greater then 59.
                  </div>
               </div>
            </div>
         </div>

         <div class="col">
            <div class="form-group">
               <label>cookTime time</label>
               <div class="input-group">
                  <input class="form-control time-hour" id="cookTimeHour" formControlName="cookTimeHour" type="number">
                  <input class="time-postfix" type="text" value=" Hours" readonly="readonly" />
               </div>
               <div class="input-group">
                  <input class="form-control time-minute" id="cookTimeMinute" formControlName="cookTimeMinute" type="number">
                  <input class="time-postfix" type="text" value=" Minutes" readonly="readonly" />
               </div>
               <div class="input-group ">
                  <input class="form-control time-second" id="cookTimeSecond" formControlName="cookTimeSecond" type="number">
                  <input class="time-postfix" type="text" value=" Seconds" readonly="readonly" />
               </div>
               <div
                  *ngIf="getFormComponent('recipe.cookTimeHour').invalid && (getFormComponent('recipe.cookTimeHour').dirty || getFormComponent('recipe.cookTimeHour').touched)">
                  <div *ngIf="getFormComponent('recipe.cookTimeHour').errors.min" class="validator">
                     cookTime hours can not be less then 0.
                  </div>
               </div>
               <div
                  *ngIf="getFormComponent('recipe.cookTimeMinute').invalid && (getFormComponent('recipe.cookTimeMinute').dirty || getFormComponent('recipe.cookTimeMinute').touched)">
                  <div *ngIf="getFormComponent('recipe.cookTimeMinute').errors.min" class="validator">
                     cookTime minutes can not be less then 0.
                  </div>
                  <div *ngIf="getFormComponent('recipe.cookTimeMinute').errors.max" class="validator">
                     cookTime minutes can not be greater then 59.
                  </div>
               </div>
               <div
                  *ngIf="getFormComponent('recipe.cookTimeSecond').invalid && (getFormComponent('recipe.cookTimeSecond').dirty || getFormComponent('recipe.cookTimeSecond').touched)">
                  <div *ngIf="getFormComponent('recipe.cookTimeSecond').errors.min" class="validator">
                     cookTime seconds can not be less then 0.
                  </div>
                  <div *ngIf="getFormComponent('recipe.cookTimeSecond').errors.max" class="validator">
                     cookTime seconds can not be greater then 59.
                  </div>
               </div>
            </div>
         </div>
      </div>
      <!--
      <div class="form-group form-row" formArrayName="ingredients">
         <div class="col">
            <h5>Ingredients</h5>
         </div>
         <table class="table table-borderless table-sm">
            <thead>
               <tr>
                  <th style="width: 15%">Quantity</th>
                  <th style="width: 25%">Measurement</th>
                  <th style="width: 60%">Ingredient</th>
               </tr>
            </thead>
            <tbody>
               <tr *ngFor="let ingredient of ingredients.controls; let i = index" formGroupName="{{i}}">
                  <td><input type="text" class="form-control" formControlName="quantity"></td>
                  <td>

                     <select class="form-control" formControlName="servingType">
                        <option *ngFor="let measure of measurements">{{measure}}</option>
                     </select>

                  </td>
                  <td>
                     <input type="text" class="form-control" formControlName="pantry">
  
                  </td>
                  <td><button class="btn btn-outline-danger key" type="button" (click)=removeIngredient(i)>-</button>
                  </td>
               </tr>
               <tr>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td><button class="btn btn-outline-primary key" type="button" (click)=addIngredient()>+</button></td>
               </tr>
            </tbody>
         </table>
      </div>

      <div class="form-group form-row" formArrayName="directions">
         <div class="col">
            <h5>Directions</h5>
         </div>
         <table class="table table-sm table-borderless">
            <thead>
               <tr>
                  <th style="width: 5%">Step</th>
                  <th style="width: 95%">Instruction</th>
               </tr>
            </thead>
            <tbody>
               <tr *ngFor="let direction of directions.controls; let i = index" formGroupName="{{i}}">
                  <td>{{direction.controls.step.value}}</td>
                  <td><input type="text" class="form-control" formControlName="instructions"></td>
                  <td><button class="btn btn-outline-danger key" type="button"
                        (click)=removeDirection(direction)>-</button></td>
               </tr>
               <tr>
                  <td></td>
                  <td></td>
                  <td><button class="btn btn-outline-primary key" type="button" (click)=addDirection()>+</button></td>
               </tr>
            </tbody>
         </table>
      </div>
   -->

      <div class="form-group">
         <label for="thumbnail">Thumbnail</label>
         <input type="file" class="form-control-file" id="thumbnail" formControlName="imageSource"
            accept="image/png, image/jpeg, image/jpg" (change)="onFileChange($event)">
         <small id="thumbnailHelp" class="form-text text-muted">Accepted formats: png, jpeg and jpg</small>
         <div *ngIf="(getFormComponent('recipe.imageSource').dirty || getFormComponent('recipe.imageSource').touched) || formSubmitted">
            <div *ngIf="invalidImageType" class="validator">
               Invalid image type.
            </div>
            <div *ngIf="invalidImageSize" class="validator">
               10Mb size exceeded, upload a lower resolution image.
            </div>
         </div>
      </div>

         <div class="row mt-3 mb-3">
            <div class="col d-flex justify-content-end">
               <button class="btn btn-outline-primary" type="submit">Create recipe</button>
            </div>
         </div>
      </div>
</form>